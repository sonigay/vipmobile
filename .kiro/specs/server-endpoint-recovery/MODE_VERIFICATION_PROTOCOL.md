# ëª¨ë“œë³„ ì›ë³¸ ë¡œì§ ê²€ì¦ ë° ìˆ˜ì • í”„ë¡œí† ì½œ

## ëª©ì 
ì‚¬ìš©ìê°€ íŠ¹ì • ëª¨ë“œì—ì„œ ë¬¸ì œë¥¼ ë°œê²¬í–ˆì„ ë•Œ, í•´ë‹¹ ëª¨ë“œì˜ ëª¨ë“  APIë¥¼ ì›ë³¸ íŒŒì¼ê³¼ ë¹„êµí•˜ì—¬ ì™„ì „íˆ ë™ì¼í•˜ê²Œ ìˆ˜ì •í•˜ëŠ” í‘œì¤€ ì ˆì°¨

## ì‘ì—… ê·œì¹™

### 0. ğŸš¨ ìµœìš°ì„  ì›ì¹™: ì›ë³¸ ë¡œì§ ì™„ì „ ë³µì‚¬ ğŸš¨

**ì‚¬ìš©ìê°€ "[ëª¨ë“œëª…] ì›ë³¸íŒŒì¼ í™•ì¸í•´ì„œ ìˆ˜ì •í•´ì¤˜"ë¼ê³  ìš”ì²­í•˜ë©´:**

1. **ì›ë³¸ ë¡œì§ì„ 100% ê·¸ëŒ€ë¡œ ë³µì‚¬**
   - ì‹œíŠ¸ ì´ë¦„, ì»¬ëŸ¼ ì¸ë±ìŠ¤, í•„ë“œ ë§¤í•‘, ì‘ë‹µ í˜•ì‹ ë“± ëª¨ë“  ê²ƒì„ ì›ë³¸ê³¼ ë™ì¼í•˜ê²Œ
   - ì„ì˜ë¡œ ìˆ˜ì •í•˜ê±°ë‚˜ "ê°œì„ "í•˜ë ¤ê³  í•˜ì§€ ë§ ê²ƒ
   - ì¶”ì¸¡í•˜ì§€ ë§ê³  ì›ë³¸ì—ì„œ ì •í™•íˆ í™•ì¸

2. **ì ˆëŒ€ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ**
   - âŒ ì‹œíŠ¸ ì´ë¦„ì„ ì„ì˜ë¡œ ë§Œë“¤ì§€ ë§ ê²ƒ (ì˜ˆ: `ë ˆì´ˆíƒ„ì´ˆì±„ê¶Œ` â†’ ì˜ëª»ëœ ì˜¤íƒ€)
   - âŒ ì»¬ëŸ¼ ì¸ë±ìŠ¤ë¥¼ ì¶”ì¸¡í•˜ì§€ ë§ ê²ƒ
   - âŒ í•„ë“œë¥¼ ì„ì˜ë¡œ ì¶”ê°€/ì‚­ì œí•˜ì§€ ë§ ê²ƒ
   - âŒ ì‘ë‹µ í˜•ì‹ì„ ë³€ê²½í•˜ì§€ ë§ ê²ƒ
   - âŒ "ë” ë‚˜ì€" êµ¬í˜„ìœ¼ë¡œ ë°”ê¾¸ë ¤ê³  í•˜ì§€ ë§ ê²ƒ

3. **ë°˜ë“œì‹œ í•´ì•¼ í•  ê²ƒ**
   - âœ… ì›ë³¸ íŒŒì¼ì—ì„œ ì •í™•í•œ ì‹œíŠ¸ ì´ë¦„ í™•ì¸ (grepSearch ì‚¬ìš©)
   - âœ… ì›ë³¸ íŒŒì¼ì—ì„œ ì •í™•í•œ ì»¬ëŸ¼ ì¸ë±ìŠ¤ í™•ì¸ (readFileë¡œ 100-200ì¤„ì”©)
   - âœ… ì›ë³¸ íŒŒì¼ì—ì„œ ëª¨ë“  í•„ë“œ ë§¤í•‘ í™•ì¸
   - âœ… ì›ë³¸ íŒŒì¼ì—ì„œ ì‘ë‹µ í˜•ì‹ í™•ì¸
   - âœ… í—¬í¼ í•¨ìˆ˜ë„ ì›ë³¸ì—ì„œ ê·¸ëŒ€ë¡œ ë³µì‚¬

4. **ì‹œíŠ¸ ì´ë¦„ í™•ì¸ ë°©ë²•**
   ```bash
   # 1. ìƒìˆ˜ ì •ì˜ ê²€ìƒ‰
   grepSearch: "const.*SHEET.*="
   
   # 2. getSheetValues í˜¸ì¶œ ê²€ìƒ‰
   grepSearch: "getSheetValues\('"
   
   # 3. ì›ë³¸ íŒŒì¼ì—ì„œ í•´ë‹¹ API ë²”ìœ„ ì½ê¸°
   readFile: start_line=xxxxx, end_line=xxxxx
   ```

5. **ì˜ˆì‹œ: ì˜ëª»ëœ ìˆ˜ì • vs ì˜¬ë°”ë¥¸ ìˆ˜ì •**
   
   **âŒ ì˜ëª»ëœ ìˆ˜ì • (ì„ì˜ë¡œ ë§Œë“  ì‹œíŠ¸ ì´ë¦„)**
   ```javascript
   getSheetValues('ë ˆì´ˆíƒ„ì´ˆì±„ê¶Œ')  // ì˜¤íƒ€! ì›ë³¸ì— ì—†ìŒ
   getSheetValues('ë§¤ì¥ë³„íŒë§¤')    // ì¶”ì¸¡! ì›ë³¸ í™•ì¸ ì•ˆ í•¨
   ```
   
   **âœ… ì˜¬ë°”ë¥¸ ìˆ˜ì • (ì›ë³¸ì—ì„œ í™•ì¸í•œ ì‹œíŠ¸ ì´ë¦„)**
   ```javascript
   getSheetValues('í°í´ê°œí†µë¦¬ìŠ¤íŠ¸')  // ì›ë³¸ í™•ì¸ ì™„ë£Œ
   getSheetValues('í°í´ì¶œê³ ì²˜ë°ì´í„°') // ì›ë³¸ í™•ì¸ ì™„ë£Œ
   ```

### 1. ì‚¬ìš©ì ìš”ì²­ í˜•ì‹
```
"[ëª¨ë“œëª…] ì›ë³¸íŒŒì¼ í™•ì¸í•´ì„œ ìˆ˜ì •í•´ì¤˜"
```

ì˜ˆì‹œ:
- "ì •ì±…ëª¨ë“œ ì›ë³¸íŒŒì¼ í™•ì¸í•´ì„œ ìˆ˜ì •í•´ì¤˜"
- "ì¬ê³ ëª¨ë“œ ì›ë³¸íŒŒì¼ í™•ì¸í•´ì„œ ìˆ˜ì •í•´ì¤˜"
- "ì§ì˜ì ëª¨ë“œ ì›ë³¸íŒŒì¼ í™•ì¸í•´ì„œ ìˆ˜ì •í•´ì¤˜"
- "ì¥í‘œëª¨ë“œ ì›ë³¸íŒŒì¼ í™•ì¸í•´ì„œ ìˆ˜ì •í•´ì¤˜"

### 2. ì‘ì—… ì ˆì°¨

#### Step 1: ëª¨ë“œ ê´€ë ¨ API ì—”ë“œí¬ì¸íŠ¸ ì‹ë³„
1. ì›ë³¸ íŒŒì¼(`server/index.js.backup.original`)ì—ì„œ í•´ë‹¹ ëª¨ë“œì˜ ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ ê²€ìƒ‰
2. grepSearchë¡œ ê´€ë ¨ í‚¤ì›Œë“œ ê²€ìƒ‰
   - ì˜ˆ: ì •ì±…ëª¨ë“œ â†’ `/api/policies`, `/api/policy`
   - ì˜ˆ: ì¬ê³ ëª¨ë“œ â†’ `/api/inventory`
   - ì˜ˆ: ì§ì˜ì ëª¨ë“œ â†’ `/api/direct`, `/api/customer`

#### Step 2: ê° APIë³„ ì›ë³¸ ë¡œì§ í™•ì¸
ê° APIë§ˆë‹¤ ë‹¤ìŒ í•­ëª©ì„ ì›ë³¸ íŒŒì¼ì—ì„œ í™•ì¸:

1. **ì‹œíŠ¸ ì´ë¦„**
   - ìƒìˆ˜ ì •ì˜ í™•ì¸ (ì˜ˆ: `const POLICY_SHEET_NAME = 'ì •ì±…_ê¸°ë³¸ì •ë³´ '`)
   - í•˜ë“œì½”ë”©ëœ ì‹œíŠ¸ ì´ë¦„ í™•ì¸

2. **ì‹œíŠ¸ ì¸ë±ìŠ¤ (ì»¬ëŸ¼ ìœ„ì¹˜)**
   - ê° í•„ë“œê°€ ì–´ëŠ ì»¬ëŸ¼ì—ì„œ ì½íˆëŠ”ì§€ í™•ì¸
   - ì˜ˆ: `row[0]` (Aì—´), `row[23]` (Xì—´), `row[49]` (AXì—´)

3. **í•„ë“œ ë§¤í•‘**
   - ì›ë³¸ì—ì„œ ë°˜í™˜í•˜ëŠ” ëª¨ë“  í•„ë“œ í™•ì¸
   - ëˆ„ë½ëœ í•„ë“œê°€ ì—†ëŠ”ì§€ í™•ì¸

4. **ì‘ë‹µ í˜•ì‹**
   - ë°°ì—´ë¡œ ë°˜í™˜í•˜ëŠ”ì§€, ê°ì²´ë¡œ ë°˜í™˜í•˜ëŠ”ì§€
   - `{ success: true, data: [] }` vs `[]` ì§ì ‘ ë°˜í™˜

5. **í•„í„°ë§ ë¡œì§**
   - ë°ì´í„° í•„í„°ë§ ì¡°ê±´ í™•ì¸
   - ì •ë ¬ ìˆœì„œ í™•ì¸

6. **ìºì‹œ ì„¤ì •**
   - ìºì‹œ ì‚¬ìš© ì—¬ë¶€
   - ìºì‹œ TTL (Time To Live)

7. **ì—ëŸ¬ ì²˜ë¦¬**
   - ì—ëŸ¬ ë©”ì‹œì§€ í˜•ì‹
   - ì—ëŸ¬ ì‘ë‹µ ì½”ë“œ

#### Step 3: í˜„ì¬ êµ¬í˜„ê³¼ ë¹„êµ
1. í•´ë‹¹ ë¼ìš°í„° íŒŒì¼ ì½ê¸° (ì˜ˆ: `server/routes/policyRoutes.js`)
2. ê° APIë³„ë¡œ ì›ë³¸ê³¼ ì°¨ì´ì  ë¬¸ì„œí™”
3. ì°¨ì´ì  ëª©ë¡ ì‘ì„±

#### Step 4: ìˆ˜ì • ì‘ì—…
1. **ì›ë³¸ ë¡œì§ì„ ì •í™•íˆ ë³µì‚¬** (ê°€ì¥ ì¤‘ìš”!)
   - ì‹œíŠ¸ ì´ë¦„, ì»¬ëŸ¼ ì¸ë±ìŠ¤, í•„ë“œ ë§¤í•‘, ì‘ë‹µ í˜•ì‹ ëª¨ë‘ ì›ë³¸ê³¼ ë™ì¼í•˜ê²Œ
   - í—¬í¼ í•¨ìˆ˜ë„ ì›ë³¸ì—ì„œ ê·¸ëŒ€ë¡œ ë³µì‚¬
   - ì„ì˜ë¡œ ìˆ˜ì •í•˜ê±°ë‚˜ ê°œì„ í•˜ì§€ ë§ ê²ƒ
2. íŒ©í† ë¦¬ í•¨ìˆ˜ íŒ¨í„´ ìœ ì§€ (`createXxxRoutes(context)`)
3. ì£¼ì„ìœ¼ë¡œ ì›ë³¸ íŒŒì¼ ìœ„ì¹˜ í‘œì‹œ
   ```javascript
   // ì›ë³¸: server/index.js.backup.original (27433-27850ì¤„)
   ```
4. **ê²€ì¦: ì›ë³¸ê³¼ 100% ë™ì¼í•œì§€ ì¬í™•ì¸**
   - ì‹œíŠ¸ ì´ë¦„ì´ ì •í™•í•œê°€?
   - ì»¬ëŸ¼ ì¸ë±ìŠ¤ê°€ ì •í™•í•œê°€?
   - ëª¨ë“  í•„ë“œê°€ ë§¤í•‘ë˜ì—ˆëŠ”ê°€?
   - ì‘ë‹µ í˜•ì‹ì´ ë™ì¼í•œê°€?

#### Step 5: ê²€ì¦
1. ë¡œì»¬ ì„œë²„ ì‹œì‘ í™•ì¸
2. ëª¨ë“  ë¼ìš°íŠ¸ ë§ˆìš´íŠ¸ í™•ì¸
3. Git ì»¤ë°‹ ë° í‘¸ì‹œ

#### Step 6: ë¬¸ì„œí™”
1. ìˆ˜ì • ë‚´ì—­ì„ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ë¡œ ì‘ì„±
2. íŒŒì¼ëª…: `.kiro/specs/server-endpoint-recovery/[ëª¨ë“œëª…]-verification-[ë‚ ì§œ].md`
3. ë‚´ìš©:
   - ìˆ˜ì •ëœ API ëª©ë¡
   - ê° APIë³„ ë³€ê²½ ì‚¬í•­
   - ì›ë³¸ íŒŒì¼ ì°¸ì¡° ìœ„ì¹˜

## ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

ê° APIë§ˆë‹¤ ë‹¤ìŒ í•­ëª©ì„ í™•ì¸:

- [ ] ì‹œíŠ¸ ì´ë¦„ì´ ì›ë³¸ê³¼ ë™ì¼í•œê°€?
- [ ] ëª¨ë“  ì»¬ëŸ¼ ì¸ë±ìŠ¤ê°€ ì›ë³¸ê³¼ ë™ì¼í•œê°€?
- [ ] ëª¨ë“  í•„ë“œê°€ ë§¤í•‘ë˜ì—ˆëŠ”ê°€?
- [ ] ì‘ë‹µ í˜•ì‹ì´ ì›ë³¸ê³¼ ë™ì¼í•œê°€?
- [ ] í•„í„°ë§ ë¡œì§ì´ ì›ë³¸ê³¼ ë™ì¼í•œê°€?
- [ ] ìºì‹œ ì„¤ì •ì´ ì›ë³¸ê³¼ ë™ì¼í•œê°€?
- [ ] ì—ëŸ¬ ì²˜ë¦¬ê°€ ì›ë³¸ê³¼ ë™ì¼í•œê°€?
- [ ] ì£¼ì„ìœ¼ë¡œ ì›ë³¸ ìœ„ì¹˜ê°€ í‘œì‹œë˜ì—ˆëŠ”ê°€?

## ëª¨ë“œë³„ ì£¼ìš” API ë§¤í•‘

### ì •ì±…ëª¨ë“œ (PolicyMode)
- **ë¼ìš°í„° íŒŒì¼**: `server/routes/policyRoutes.js`
- **ì£¼ìš” API**:
  - `GET /api/policies` - ì •ì±… ëª©ë¡ ì¡°íšŒ
  - `POST /api/policies` - ì •ì±… ìƒì„±
  - `PUT /api/policies/:policyId` - ì •ì±… ìˆ˜ì •
  - `DELETE /api/policies/:policyId` - ì •ì±… ì‚­ì œ
  - `PUT /api/policies/:policyId/approve` - ì •ì±… ìŠ¹ì¸
  - `PUT /api/policies/:policyId/cancel` - ì •ì±… ì·¨ì†Œ
  - `GET /api/policies/shoe-counting` - êµ¬ë‘ì •ì±… ì¹´ìš´íŒ…
- **ê´€ë ¨ ì‹œíŠ¸**: `ì •ì±…_ê¸°ë³¸ì •ë³´ `, `í°í´ì¶œê³ ì²˜ë°ì´í„°`

### ì¬ê³ ëª¨ë“œ (InventoryMode)
- **ë¼ìš°í„° íŒŒì¼**: `server/routes/inventoryRoutes.js`
- **ì£¼ìš” API**:
  - `GET /api/inventory` - ì¬ê³  ëª©ë¡ ì¡°íšŒ
  - `GET /api/inventory/agent-filters` - ë‹´ë‹¹ì í•„í„° ëª©ë¡
  - `GET /api/inventory/summary` - ì¬ê³  ìš”ì•½
- **ê´€ë ¨ ì‹œíŠ¸**: `í°í´ì¬ê³ ë°ì´í„°`, `í°í´ê°œí†µë°ì´í„°`

### ì§ì˜ì ëª¨ë“œ (DirectStoreMode)
- **ë¼ìš°í„° íŒŒì¼**: `server/routes/directRoutes.js`, `server/directRoutes.js`
- **ì£¼ìš” API**:
  - `GET /api/direct/customer-queue` - êµ¬ë§¤ëŒ€ê¸° ëª©ë¡
  - `GET /api/direct/board` - ê²Œì‹œíŒ ëª©ë¡
  - `POST /api/direct/upload-image` - ì´ë¯¸ì§€ ì—…ë¡œë“œ
- **ê´€ë ¨ ì‹œíŠ¸**: `ì§ì˜ì _êµ¬ë§¤ëŒ€ê¸°`, `ì§ì˜ì _ê²Œì‹œíŒ`, `ì§ì˜ì _ë§¤ì¥ì‚¬ì§„`

### ì •ì‚°ëª¨ë“œ (SettlementMode)
- **ë¼ìš°í„° íŒŒì¼**: `server/routes/settlementRoutes.js` (ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í•„ìš”)
- **ì£¼ìš” API**: TBD
- **ê´€ë ¨ ì‹œíŠ¸**: TBD

### ê²€ìˆ˜ëª¨ë“œ (InspectionMode)
- **ë¼ìš°í„° íŒŒì¼**: `server/routes/inspectionRoutes.js`
- **ì£¼ìš” API**: TBD
- **ê´€ë ¨ ì‹œíŠ¸**: `ê²€ìˆ˜ê²°ê³¼`, `ì—¬ì§ì›ê²€ìˆ˜ë°ì´í„°ë©”ëª¨`, `ê²€ìˆ˜ì„¤ì •`

### ì˜ˆì•½ëª¨ë“œ (ReservationMode)
- **ë¼ìš°í„° íŒŒì¼**: `server/routes/reservationRoutes.js`
- **ì£¼ìš” API**: TBD
- **ê´€ë ¨ ì‹œíŠ¸**: `ì‚¬ì „ì˜ˆì•½ì‚¬ì´íŠ¸`

### íšŒì˜ëª¨ë“œ (MeetingMode)
- **ë¼ìš°í„° íŒŒì¼**: `server/meetingRoutes.js`
- **ì£¼ìš” API**: TBD
- **ê´€ë ¨ ì‹œíŠ¸**: TBD

### OBê´€ë¦¬ëª¨ë“œ (ObManagementMode)
- **ë¼ìš°í„° íŒŒì¼**: `server/obRoutes.js`
- **ì£¼ìš” API**: TBD
- **ê´€ë ¨ ì‹œíŠ¸**: TBD

## ì‘ì—… í…œí”Œë¦¿

### ë¹„êµ ë¬¸ì„œ í…œí”Œë¦¿
```markdown
# [ëª¨ë“œëª…] API ì›ë³¸ ë¹„êµ ë° ìˆ˜ì •

## ì‘ì—… ì¼ì‹œ
- ë‚ ì§œ: YYYY-MM-DD
- ì‘ì—…ì: AI Assistant

## ìˆ˜ì •ëœ API ëª©ë¡

### 1. [API ì—”ë“œí¬ì¸íŠ¸]
- **ì›ë³¸ ìœ„ì¹˜**: server/index.js.backup.original (ì¤„ë²ˆí˜¸)
- **í˜„ì¬ íŒŒì¼**: server/routes/xxxRoutes.js
- **ìƒíƒœ**: âœ… ìˆ˜ì • ì™„ë£Œ / âš ï¸ ë¶€ë¶„ ìˆ˜ì • / âŒ ë¯¸ìˆ˜ì •

#### ë³€ê²½ ì‚¬í•­
1. **ì‹œíŠ¸ ì´ë¦„**
   - ë³€ê²½ ì „: `xxx`
   - ë³€ê²½ í›„: `yyy`

2. **ì»¬ëŸ¼ ì¸ë±ìŠ¤**
   - ë³€ê²½ ì „: `row[10]`
   - ë³€ê²½ í›„: `row[15]`

3. **í•„ë“œ ë§¤í•‘**
   - ì¶”ê°€ëœ í•„ë“œ: `manager` (AXì—´, row[49])
   - ì‚­ì œëœ í•„ë“œ: ì—†ìŒ

4. **ì‘ë‹µ í˜•ì‹**
   - ë³€ê²½ ì „: `{ success: true, data: [] }`
   - ë³€ê²½ í›„: `[]` ì§ì ‘ ë°˜í™˜

#### ì›ë³¸ ë¡œì§ (ìš”ì•½)
```javascript
// í•µì‹¬ ë¡œì§ë§Œ ë°œì·Œ
```

#### ìˆ˜ì • í›„ ë¡œì§ (ìš”ì•½)
```javascript
// í•µì‹¬ ë¡œì§ë§Œ ë°œì·Œ
```

---

## ê²€ì¦ ê²°ê³¼
- [ ] ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [ ] ëª¨ë“  ë¼ìš°íŠ¸ ë§ˆìš´íŠ¸ í™•ì¸
- [ ] Git ì»¤ë°‹ ì™„ë£Œ
- [ ] ë°°í¬ ì™„ë£Œ

## ì°¸ê³ ì‚¬í•­
- ì¶”ê°€ ìˆ˜ì •ì´ í•„ìš”í•œ ë¶€ë¶„
- ì•Œë ¤ì§„ ì´ìŠˆ
```

## ìë™í™” ê°€ëŠ¥í•œ ë¶€ë¶„

í–¥í›„ ìŠ¤í¬ë¦½íŠ¸ë¡œ ìë™í™”í•  ìˆ˜ ìˆëŠ” ì‘ì—…:
1. ì›ë³¸ íŒŒì¼ì—ì„œ íŠ¹ì • ëª¨ë“œì˜ ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ ì¶”ì¶œ
2. ê° APIì˜ ì‹œíŠ¸ ì´ë¦„ ì¶”ì¶œ
3. ê° APIì˜ ì»¬ëŸ¼ ì¸ë±ìŠ¤ ì¶”ì¶œ
4. í˜„ì¬ êµ¬í˜„ê³¼ ìë™ ë¹„êµ

## ì£¼ì˜ì‚¬í•­

1. **ğŸš¨ ì›ë³¸ ë¡œì§ ì™„ì „ ë³µì‚¬ (ìµœìš°ì„ )**
   - ì‚¬ìš©ìê°€ "[ëª¨ë“œëª…] ì›ë³¸íŒŒì¼ í™•ì¸í•´ì„œ ìˆ˜ì •í•´ì¤˜"ë¼ê³  í•˜ë©´ ì›ë³¸ì„ 100% ê·¸ëŒ€ë¡œ ë³µì‚¬
   - ì‹œíŠ¸ ì´ë¦„ì„ ì ˆëŒ€ ì„ì˜ë¡œ ë§Œë“¤ì§€ ë§ ê²ƒ (ì˜ˆ: `ë ˆì´ˆíƒ„ì´ˆì±„ê¶Œ` ê°™ì€ ì˜¤íƒ€)
   - ì»¬ëŸ¼ ì¸ë±ìŠ¤ë¥¼ ì¶”ì¸¡í•˜ì§€ ë§ ê²ƒ
   - í•„ë“œë¥¼ ì„ì˜ë¡œ ì¶”ê°€/ì‚­ì œí•˜ì§€ ë§ ê²ƒ
   - ì‘ë‹µ í˜•ì‹ì„ ë³€ê²½í•˜ì§€ ë§ ê²ƒ

2. **ì›ë³¸ íŒŒì¼ ì§ì ‘ ì½ê¸° ê¸ˆì§€**
   - `server/index.js.backup.original`ëŠ” 40000ì¤„ì´ë¯€ë¡œ grepSearchë§Œ ì‚¬ìš©
   - í•„ìš”í•œ ë¶€ë¶„ë§Œ readFileë¡œ 100-200ì¤„ì”© ì½ê¸°

3. **íŒ©í† ë¦¬ í•¨ìˆ˜ íŒ¨í„´ ìœ ì§€**
   - ëª¨ë“  ë¼ìš°í„°ëŠ” `createXxxRoutes(context)` í˜•íƒœ
   - `context`ì—ì„œ `sheetsClient`, `cacheManager`, `rateLimiter` ì‚¬ìš©

4. **ì—ëŸ¬ ì²˜ë¦¬ ì¼ê´€ì„±**
   - ì›ë³¸ê³¼ ë™ì¼í•œ ì—ëŸ¬ ë©”ì‹œì§€ ì‚¬ìš©
   - ì›ë³¸ê³¼ ë™ì¼í•œ HTTP ìƒíƒœ ì½”ë“œ ì‚¬ìš©

5. **ìºì‹œ ì •ì±… ìœ ì§€**
   - ì›ë³¸ê³¼ ë™ì¼í•œ ìºì‹œ TTL ì‚¬ìš©
   - ìºì‹œ í‚¤ ë„¤ì´ë° ì¼ê´€ì„± ìœ ì§€

6. **ë¡œê¹… ì¼ê´€ì„±**
   - ì›ë³¸ê³¼ ìœ ì‚¬í•œ ë¡œê·¸ ë©”ì‹œì§€ ì‚¬ìš©
   - ë””ë²„ê¹…ì— í•„ìš”í•œ ì •ë³´ í¬í•¨

7. **í—¬í¼ í•¨ìˆ˜ë„ ì›ë³¸ì—ì„œ ë³µì‚¬**
   - APIê°€ ì‚¬ìš©í•˜ëŠ” í—¬í¼ í•¨ìˆ˜ë„ ì›ë³¸ì—ì„œ ì°¾ì•„ì„œ ê·¸ëŒ€ë¡œ ë³µì‚¬
   - ì˜ˆ: `processAgentClosingData`, `findMappingFailures` ë“±

## ì˜ˆì‹œ: ì •ì±…ëª¨ë“œ ê²€ì¦ ì‘ì—…

### ì‚¬ìš©ì ìš”ì²­
```
ì •ì±…ëª¨ë“œ ì›ë³¸íŒŒì¼ í™•ì¸í•´ì„œ ìˆ˜ì •í•´ì¤˜
```

### AI ì‘ì—… ìˆœì„œ
1. grepSearchë¡œ `/api/policies` ê´€ë ¨ ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ ì°¾ê¸°
2. ê° ì—”ë“œí¬ì¸íŠ¸ë³„ë¡œ ì›ë³¸ ë¡œì§ í™•ì¸ (100-200ì¤„ì”©)
3. `server/routes/policyRoutes.js` ì½ê¸°
4. ì°¨ì´ì  ë¬¸ì„œí™”
5. ì›ë³¸ ë¡œì§ìœ¼ë¡œ ìˆ˜ì •
6. ë¡œì»¬ í…ŒìŠ¤íŠ¸
7. Git ì»¤ë°‹ ë° í‘¸ì‹œ
8. ìˆ˜ì • ë‚´ì—­ ë¬¸ì„œ ì‘ì„±

## ë²„ì „ ê´€ë¦¬

- **ë¬¸ì„œ ë²„ì „**: 1.1
- **ì‘ì„±ì¼**: 2025-01-25
- **ìµœì¢… ìˆ˜ì •ì¼**: 2025-01-25
- **ì£¼ìš” ë³€ê²½ì‚¬í•­**:
  - v1.1: ì›ë³¸ ë¡œì§ ì™„ì „ ë³µì‚¬ ì›ì¹™ ì¶”ê°€ (ì‹œíŠ¸ ì´ë¦„ ì„ì˜ ìƒì„± ê¸ˆì§€ ë“±)
  - v1.0: ì´ˆê¸° ë²„ì „

## ì‹¤ì œ ì‚¬ë¡€: ì˜ëª»ëœ ìˆ˜ì • ì˜ˆì‹œ

### ì‚¬ë¡€ 1: ì¥í‘œëª¨ë“œ ì‹œíŠ¸ ì´ë¦„ ì˜¤ë¥˜

**ë¬¸ì œ**: AIê°€ ì‹œíŠ¸ ì´ë¦„ì„ ì„ì˜ë¡œ ë§Œë“¤ì–´ì„œ ì—ëŸ¬ ë°œìƒ
```javascript
// âŒ ì˜ëª»ëœ ìˆ˜ì • (ì„ì˜ë¡œ ë§Œë“  ì‹œíŠ¸ ì´ë¦„)
getSheetValues('ë ˆì´ˆíƒ„ì´ˆì±„ê¶Œ')      // ì˜¤íƒ€! ì›ë³¸ì— ì—†ìŒ
getSheetValues('ë ˆì´ˆíƒ„ì´ˆì±„ê¶Œì´ë ¥')   // ì˜¤íƒ€! ì›ë³¸ì— ì—†ìŒ
getSheetValues('ë§¤ì¥ë³„íŒë§¤')        // ì¶”ì¸¡! ì›ë³¸ í™•ì¸ ì•ˆ í•¨
```

**í•´ê²°**: ì›ë³¸ íŒŒì¼ì—ì„œ ì •í™•í•œ ì‹œíŠ¸ ì´ë¦„ í™•ì¸
```javascript
// âœ… ì˜¬ë°”ë¥¸ ìˆ˜ì • (ì›ë³¸ì—ì„œ í™•ì¸)
getSheetValues('í°í´ê°œí†µë¦¬ìŠ¤íŠ¸')     // ì›ë³¸ 36913ì¤„ í™•ì¸
getSheetValues('í°í´ì¶œê³ ì²˜ë°ì´í„°')   // ì›ë³¸ 33555ì¤„ í™•ì¸
getSheetValues('í°í´ê°œí†µë°ì´í„°')     // ì›ë³¸ 33556ì¤„ í™•ì¸
```

**êµí›ˆ**: 
- ì‹œíŠ¸ ì´ë¦„ì€ ì ˆëŒ€ ì¶”ì¸¡í•˜ì§€ ë§ ê²ƒ
- ë°˜ë“œì‹œ ì›ë³¸ íŒŒì¼ì—ì„œ `getSheetValues('xxx')` í˜•íƒœë¡œ ê²€ìƒ‰í•˜ì—¬ í™•ì¸
- ì˜¤íƒ€ì²˜ëŸ¼ ë³´ì´ëŠ” ì´ë¦„ë„ ì›ë³¸ì— ê·¸ëŒ€ë¡œ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ í™•ì¸ í•„ìˆ˜

### ì‚¬ë¡€ 2: agentRoutes.js API ë¡œì§ ì˜¤ë¥˜

**ë¬¸ì œ**: í˜„ì¬ êµ¬í˜„ì´ ì›ë³¸ê³¼ ì™„ì „íˆ ë‹¤ë¦„
```javascript
// âŒ ì˜ëª»ëœ êµ¬í˜„ (ë‹¨ìˆœ ì‹œíŠ¸ ì½ê¸°ë§Œ)
router.get('/api/agent-closing-chart', async (req, res) => {
  const values = await getSheetValues('ëŒ€ë¦¬ì ë§ˆê°ì¥í‘œ');  // ì˜ëª»ëœ ì‹œíŠ¸ ì´ë¦„
  res.json(values.slice(1));  // ë‹¨ìˆœ ë°˜í™˜
});
```

**í•´ê²°**: ì›ë³¸ ë¡œì§ ì „ì²´ë¥¼ ë³µì‚¬
```javascript
// âœ… ì˜¬ë°”ë¥¸ êµ¬í˜„ (ì›ë³¸ 36844-37350ì¤„ ë³µì‚¬)
router.get('/api/agent-closing-chart', async (req, res) => {
  const { date, agent } = req.query;
  const [phoneklStoreData, phoneklInventoryData, phoneklActivationData] = await Promise.all([
    getSheetValues('í°í´ì¶œê³ ì²˜ë°ì´í„°'),
    getSheetValues('í°í´ì¬ê³ ë°ì´í„°'),
    getSheetValues('í°í´ê°œí†µë°ì´í„°')
  ]);
  const agentData = processAgentClosingData({ ... });  // í—¬í¼ í•¨ìˆ˜ë„ ë³µì‚¬
  res.json({ success: true, agentData, ... });
});
```

**êµí›ˆ**:
- API ë¡œì§ì´ ë³µì¡í•˜ë©´ ì›ë³¸ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬
- í—¬í¼ í•¨ìˆ˜ë„ ì›ë³¸ì—ì„œ ì°¾ì•„ì„œ ë³µì‚¬
- ë‹¨ìˆœí™”í•˜ë ¤ê³  í•˜ì§€ ë§ ê²ƒ
