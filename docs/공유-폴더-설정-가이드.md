# 공유 폴더 설정 가이드 (일반 Google 계정)

## ⚠️ 현재 상황

- 일반 Google 계정 사용 중 (Shared Drive 없음)
- 공유 폴더는 개인 드라이브에 있어서 Service Account가 저장할 수 없음
- 하지만 폴더 접근은 가능해야 함

## 🔧 공유 폴더에 Service Account 추가 방법

### 1단계: 폴더 공유 설정 확인

1. **Google Drive 접속**
   - https://drive.google.com 접속

2. **"어플자료" 폴더 찾기**
   - 폴더를 찾아서 우클릭 또는 폴더 선택

3. **공유 설정 열기**
   - 폴더 선택 후 오른쪽 상단 "공유" 버튼 클릭
   - 또는 폴더 우클릭 > "공유" 선택

### 2단계: Service Account 추가

1. **"사람 추가" 또는 "사용자 및 그룹 추가" 클릭**

2. **Service Account 이메일 입력**
   ```
   siljuk@siljuk.iam.gserviceaccount.com
   ```
   ⚠️ **주의**: 이메일 주소를 정확히 입력해야 합니다!

3. **권한 설정**
   - 권한: **"편집자"** 선택 (필수)
   - "뷰어"는 읽기만 가능하므로 저장 불가

4. **"전송" 또는 "공유" 클릭**

5. **알림 설정 (선택사항)**
   - "알림 전송" 체크 해제 가능 (Service Account는 이메일을 받지 않음)

### 3단계: 공유 확인

1. **공유 설정 창에서 확인**
   - Service Account 이메일이 목록에 있는지 확인
   - 권한이 "편집자"로 설정되어 있는지 확인

2. **폴더 ID 확인**
   - 폴더 URL에서 폴더 ID 추출
   - 예: `https://drive.google.com/drive/folders/1u2r9l7MHeWrU3mIeO74eGVuEjhTlzcC_`
   - 폴더 ID: `1u2r9l7MHeWrU3mIeO74eGVuEjhTlzcC_`
   - ⚠️ **주의**: 마지막 `_` 포함 여부 확인

---

## ⚠️ 제한사항

### 개인 드라이브의 한계

**공유 폴더라도 개인 드라이브에 있으면:**
- Service Account가 폴더에 접근은 가능
- 하지만 **파일을 저장할 수 없음** (저장소 할당량 없음)

**에러 메시지:**
```
Service Accounts do not have storage quota. 
Leverage shared drives or use OAuth delegation instead.
```

---

## ✅ 해결 방법

### 방법 1: OAuth Delegation 사용 (권장)

Service Account가 사용자 계정을 대신하여 개인 드라이브에 저장

**필요한 것:**
- Google Workspace 관리자 권한
- Domain-wide delegation 설정

**장점:**
- 개인 드라이브에 저장 가능
- 공유 폴더 사용 가능

### 방법 2: Google Workspace로 업그레이드

- Google Workspace 계정으로 업그레이드
- Shared Drive 생성 가능
- Service Account가 Shared Drive에 저장 가능

---

## 🔍 문제 해결

### 에러: "File not found" (404)

**원인**: Service Account가 폴더에 접근할 수 없음

**해결:**
1. 폴더 공유 설정 확인
2. Service Account 이메일이 정확한지 확인
3. 권한이 "편집자"인지 확인

### 에러: "Service Accounts do not have storage quota" (403)

**원인**: 개인 드라이브에 저장 시도

**해결:**
- OAuth Delegation 사용 또는
- Google Workspace로 업그레이드하여 Shared Drive 사용

---

## 📝 체크리스트

공유 폴더 설정 확인:
- [ ] 폴더 공유 설정 열기
- [ ] Service Account 이메일 추가: `siljuk@siljuk.iam.gserviceaccount.com`
- [ ] 권한: "편집자" 선택
- [ ] 폴더 ID 확인 및 환경변수 설정

그래도 저장이 안 되면:
- [ ] OAuth Delegation 설정 또는
- [ ] Google Workspace로 업그레이드
