# ì¬ì´ˆë‹´ì´ˆì±„ê¶Œ ìŠ¬ë¼ì´ë“œ ì—…ë¡œë“œ ì‹¤íŒ¨ ì›ì¸ ë¶„ì„

## ğŸ” ë¬¸ì œ í˜„ìƒ
- ì¬ì´ˆë‹´ì´ˆì±„ê¶Œ ìŠ¬ë¼ì´ë“œê°€ ë””ìŠ¤ì½”ë“œì— ì—…ë¡œë“œë˜ì§€ ì•ŠìŒ
- ìº¡ì²˜ëŠ” ì™„ë£Œë˜ì—ˆìœ¼ë‚˜ ì—…ë¡œë“œ ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨
- ì´ë¯¸ì§€ í¬ê¸°: 1.16MB

## ğŸ“Š í˜„ì¬ êµ¬í˜„ ìƒíƒœ ì ê²€

### âœ… ì™„ë£Œëœ ì‚¬í•­
1. **SlideCaptureConfig.js**: `rechotanchoBond` ì„¤ì •ì— `imageQuality: 0.85` ì¶”ê°€ë¨
2. **UnifiedCaptureEngine.js**: ì¬ì´ˆë‹´ì´ˆì±„ê¶Œ ì‹ë³„ ë¡œì§ ì¶”ê°€, `direct` ì¼€ì´ìŠ¤ì—ì„œ `imageQuality` ì „ë‹¬
3. **screenCapture.js**: `options.imageQuality` ì²˜ë¦¬ ë¡œì§ ì¶”ê°€
4. **MeetingCaptureManager.js**: ì—…ë¡œë“œ íƒ€ì„ì•„ì›ƒ 60ì´ˆ, ì¬ì‹œë„ 7íšŒ, ì¶”ê°€ ì••ì¶• ë¡œì§ ìœ ì§€

### â“ ì˜ì‹¬ë˜ëŠ” ë¬¸ì œì 

#### 1. imageQualityê°€ ì‹¤ì œë¡œ ì ìš©ë˜ì§€ ì•Šì•˜ì„ ê°€ëŠ¥ì„±
**ë¶„ì„:**
- `UnifiedCaptureEngine.js`ì˜ `executeCapture`ì—ì„œ `config?.imageQuality`ë¥¼ í™•ì¸
- `config`ëŠ” `getCaptureConfig(slide)`ì—ì„œ ê°€ì ¸ì˜´
- `getCaptureConfig`ê°€ `rechotanchoBond` ì„¤ì •ì„ ì˜¬ë°”ë¥´ê²Œ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸ í•„ìš”

**í™•ì¸ í•„ìš”:**
```javascript
// UnifiedCaptureEngine.jsì˜ captureSlide í•¨ìˆ˜ì—ì„œ
slideType = identifySlideType(slide);
config = getCaptureConfig(slide);
```
- `identifySlideType(slide)`ê°€ `'rechotanchoBond'`ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸
- `getCaptureConfig(slide)`ê°€ `SLIDE_CAPTURE_CONFIG.rechotanchoBond`ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸

#### 2. ì´ë¯¸ì§€ í¬ê¸° ë¬¸ì œ
**í˜„ì¬ ìƒí™©:**
- ìº¡ì²˜ í›„: 1.16MB
- `imageQuality: 0.85` ì ìš© ì‹œë„
- `MeetingCaptureManager.js`ì—ì„œ ì¶”ê°€ ì••ì¶• (1MB ì´ìƒ ì‹œ `compressImageBlob`ë¡œ 0.85 ì••ì¶•)

**ë¬¸ì œ ê°€ëŠ¥ì„±:**
- `imageQuality: 0.85`ê°€ ì‹¤ì œë¡œ ì ìš©ë˜ì§€ ì•Šì•„ ì›ë³¸ í¬ê¸°ë¡œ ìº¡ì²˜ë¨
- PNG ì••ì¶•ì´ íš¨ê³¼ì ì´ì§€ ì•Šì„ ìˆ˜ ìˆìŒ (JPEG ì••ì¶•ì´ ë” íš¨ê³¼ì )
- ì´ë¯¸ì§€ í¬ê¸°ê°€ ì—¬ì „íˆ ë„ˆë¬´ ì»¤ì„œ ì—…ë¡œë“œ íƒ€ì„ì•„ì›ƒ ë°œìƒ

#### 3. ì—…ë¡œë“œ ë‹¨ê³„ ë¬¸ì œ
**í˜„ì¬ ì„¤ì •:**
- íƒ€ì„ì•„ì›ƒ: 60ì´ˆ
- ì¬ì‹œë„: 7íšŒ
- CORS ëª¨ë“œ: `cors`, `credentials: 'omit'`

**ë¬¸ì œ ê°€ëŠ¥ì„±:**
- CORS ì˜¤ë¥˜ê°€ ê³„ì† ë°œìƒ
- ì„œë²„(Discord)ì—ì„œ í° ì´ë¯¸ì§€ ì—…ë¡œë“œ ê±°ë¶€
- ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ
- ì„œë²„ ì²˜ë¦¬ ì‹œê°„ ì´ˆê³¼ (503 ì˜¤ë¥˜)

#### 4. ì¬ì´ˆë‹´ì´ˆì±„ê¶Œ ìŠ¬ë¼ì´ë“œì˜ íŠ¹ìˆ˜ì„±
**ë Œë”ë§ íŠ¹ì„±:**
- `direct` ë°©ì‹ ì‚¬ìš©
- `needsWidthAdjustment: true` (1920px)
- `needsHeightMeasurement: true`
- `needsRightWhitespaceRemoval: true`

**ë¬¸ì œ ê°€ëŠ¥ì„±:**
- ì‹¤ì œ ìº¡ì²˜ë˜ëŠ” ì´ë¯¸ì§€ í¬ê¸°ê°€ ì˜ˆìƒë³´ë‹¤ í¼
- ìŠ¤íƒ€ì¼ ì¡°ì • ê³¼ì •ì—ì„œ ë¶ˆí•„ìš”í•œ ì˜ì—­ í¬í•¨
- í…Œì´ë¸” ë Œë”ë§ ë¬¸ì œë¡œ ì´ë¯¸ì§€ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ í¼

## ğŸ” ì›ì¸ ë¶„ì„ ê³„íš

### 1ë‹¨ê³„: imageQuality ì „ë‹¬ í™•ì¸
**í™•ì¸ ì‚¬í•­:**
- [ ] `identifySlideType(slide)`ê°€ ì¬ì´ˆë‹´ì´ˆì±„ê¶Œì„ ì˜¬ë°”ë¥´ê²Œ ì‹ë³„í•˜ëŠ”ì§€
- [ ] `getCaptureConfig(slide)`ê°€ `imageQuality: 0.85`ë¥¼ í¬í•¨í•œ configë¥¼ ë°˜í™˜í•˜ëŠ”ì§€
- [ ] `executeCapture`ì—ì„œ `config?.imageQuality`ê°€ `0.85`ì¸ì§€
- [ ] `captureElement`ì— `imageQuality: 0.85`ê°€ ì‹¤ì œë¡œ ì „ë‹¬ë˜ëŠ”ì§€
- [ ] `screenCapture.js`ì—ì„œ `options?.imageQuality`ê°€ `0.85`ì¸ì§€ í™•ì¸

**ë””ë²„ê¹… ë°©ë²•:**
```javascript
// UnifiedCaptureEngine.js executeCapture í•¨ìˆ˜ ì‹œì‘ ë¶€ë¶„ì—
if (process.env.NODE_ENV === 'development') {
  console.log('ğŸ” [executeCapture] ì¬ì´ˆë‹´ì´ˆì±„ê¶Œ í™•ì¸:', {
    isRechotanchoBond,
    hasConfig: !!config,
    imageQuality: config?.imageQuality,
    slideType: slide?.subTab
  });
}

// screenCapture.jsì—ì„œ
if (options?.imageQuality !== undefined) {
  console.log(`ğŸ“¦ [screenCapture] imageQuality ì „ë‹¬ë¨: ${options.imageQuality} (slideId: ${slideId})`);
}
```

### 2ë‹¨ê³„: ì‹¤ì œ ì´ë¯¸ì§€ í¬ê¸° í™•ì¸
**í™•ì¸ ì‚¬í•­:**
- [ ] ìº¡ì²˜ ì§í›„ blob í¬ê¸°
- [ ] `imageQuality: 0.85` ì ìš© í›„ blob í¬ê¸°
- [ ] `compressImageBlob` ì ìš© í›„ blob í¬ê¸°
- [ ] ìµœì¢… ì—…ë¡œë“œ ì‹œë„ ì‹œ blob í¬ê¸°

**ë””ë²„ê¹… ë°©ë²•:**
```javascript
// MeetingCaptureManager.jsì—ì„œ
console.log(`ğŸ“Š [ì¬ì´ˆë‹´ì´ˆì±„ê¶Œ] ìº¡ì²˜ ì§í›„ í¬ê¸°: ${(blob.size / 1024 / 1024).toFixed(2)}MB`);
// ì••ì¶• í›„
console.log(`ğŸ“Š [ì¬ì´ˆë‹´ì´ˆì±„ê¶Œ] ì••ì¶• í›„ í¬ê¸°: ${(blob.size / 1024 / 1024).toFixed(2)}MB`);
```

### 3ë‹¨ê³„: ì—…ë¡œë“œ ì—ëŸ¬ ìƒì„¸ ë¶„ì„
**í™•ì¸ ì‚¬í•­:**
- [ ] ì‹¤ì œ ì—ëŸ¬ ë©”ì‹œì§€ (CORS, 502, 503 ë“±)
- [ ] ì—ëŸ¬ ë°œìƒ ì‹œì  (ì¬ì‹œë„ ëª‡ ë²ˆì§¸)
- [ ] ì„œë²„ ì‘ë‹µ ë‚´ìš©
- [ ] ë„¤íŠ¸ì›Œí¬ ìš”ì²­ í—¤ë”

**ë””ë²„ê¹… ë°©ë²•:**
```javascript
// uploadWithRetry í•¨ìˆ˜ì—ì„œ
catch (error) {
  console.error(`âŒ [ì¬ì´ˆë‹´ì´ˆì±„ê¶Œ ì—…ë¡œë“œ ì‹¤íŒ¨] ì‹œë„ ${attempt}/${maxRetries}:`, {
    error: error.message,
    errorName: error.name,
    blobSize: blob.size,
    blobSizeMB: (blob.size / 1024 / 1024).toFixed(2),
    isCorsError: error.message.includes('CORS'),
    isNetworkError: error.message.includes('fetch'),
    isServerError: error.message.includes('502') || error.message.includes('503')
  });
}
```

### 4ë‹¨ê³„: ì¬ì´ˆë‹´ì´ˆì±„ê¶Œ ìŠ¬ë¼ì´ë“œ ë Œë”ë§ í™•ì¸
**í™•ì¸ ì‚¬í•­:**
- [ ] ìº¡ì²˜ë˜ëŠ” ì‹¤ì œ DOM ìš”ì†Œ í¬ê¸°
- [ ] `sizeInfo.measuredWidth`, `sizeInfo.measuredHeight` ê°’
- [ ] ìŠ¤íƒ€ì¼ ì¡°ì • í›„ ì‹¤ì œ í¬ê¸°
- [ ] ë¶ˆí•„ìš”í•œ ì—¬ë°±ì´ í¬í•¨ë˜ëŠ”ì§€

**ë””ë²„ê¹… ë°©ë²•:**
```javascript
// UnifiedCaptureEngine.js executeCaptureì˜ direct ì¼€ì´ìŠ¤ì—ì„œ
if (isRechotanchoBond && process.env.NODE_ENV === 'development') {
  console.log('ğŸ” [ì¬ì´ˆë‹´ì´ˆì±„ê¶Œ] ìº¡ì²˜ ì •ë³´:', {
    captureWidth,
    captureHeight,
    measuredWidth: sizeInfo?.measuredWidth,
    measuredHeight: sizeInfo?.measuredHeight,
    elementWidth: captureElementForDirect.offsetWidth,
    elementHeight: captureElementForDirect.offsetHeight
  });
}
```

## ğŸ¯ í•µì‹¬ ë¬¸ì œ ê°€ì„¤

### ê°€ì„¤ 1: imageQualityê°€ ì „ë‹¬ë˜ì§€ ì•ŠìŒ
**ì¦ê±°:**
- `imageQuality` ì„¤ì •ì´ ì¶”ê°€ë˜ì—ˆì§€ë§Œ ì‹¤ì œë¡œ ì ìš©ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ
- `config` ê°ì²´ì—ì„œ `imageQuality`ë¥¼ ì½ì§€ ëª»í•  ìˆ˜ ìˆìŒ

**í•´ê²° ë°©ë²•:**
- `getCaptureConfig` í•¨ìˆ˜ê°€ `imageQuality`ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸
- `executeCapture`ì—ì„œ `config?.imageQuality` ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€

### ê°€ì„¤ 2: ì´ë¯¸ì§€ í¬ê¸°ê°€ ì—¬ì „íˆ í¼
**ì¦ê±°:**
- 1.16MBëŠ” ì—¬ì „íˆ ìƒëŒ€ì ìœ¼ë¡œ í¼
- PNG ì••ì¶•ì€ íš¨ê³¼ê°€ ì œí•œì 
- `imageQuality: 0.85`ë§Œìœ¼ë¡œëŠ” ì¶©ë¶„í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ

**í•´ê²° ë°©ë²•:**
- `imageQuality`ë¥¼ ë” ë‚®ì¶¤ (0.80 ë˜ëŠ” 0.75)
- JPEG í˜•ì‹ ì‚¬ìš© ê³ ë ¤ (ë” ë‚˜ì€ ì••ì¶•ë¥ )
- ì¶”ê°€ ì••ì¶• ë¡œì§ ê°•í™”

### ê°€ì„¤ 3: ì—…ë¡œë“œ ë‹¨ê³„ì—ì„œ ì‹¤ì œ ì—ëŸ¬ ë°œìƒ
**ì¦ê±°:**
- CORS ì˜¤ë¥˜ê°€ ê³„ì† ë°œìƒ
- 502/503 ì„œë²„ ì˜¤ë¥˜
- ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ

**í•´ê²° ë°©ë²•:**
- ì‹¤ì œ ì—ëŸ¬ ë¡œê·¸ í™•ì¸
- ì„œë²„ ì¸¡ CORS ì„¤ì • í™•ì¸
- Discord API ì œí•œ í™•ì¸

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. **ì¦‰ì‹œ í™•ì¸**: ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì‹¤ì œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
2. **ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€**: ìœ„ì˜ ë””ë²„ê¹… ì½”ë“œ ì¶”ê°€í•˜ì—¬ ì‹¤ì œ ë™ì‘ í™•ì¸
3. **ë‹¨ê³„ë³„ ê²€ì¦**: ê° ë‹¨ê³„ì—ì„œ ë°ì´í„° íë¦„ í™•ì¸
4. **í•´ê²°ì±… ì ìš©**: í™•ì¸ëœ ë¬¸ì œì— ëŒ€í•œ í•´ê²°ì±… ì ìš©

## âš ï¸ ì£¼ì˜ì‚¬í•­
- ë‹¤ë¥¸ ìŠ¬ë¼ì´ë“œì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ì¬ì´ˆë‹´ì´ˆì±„ê¶Œë§Œ ìˆ˜ì •
- ë””ë²„ê¹… ë¡œê·¸ëŠ” ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì¶œë ¥
- ë³€ê²½ ì‚¬í•­ì€ ë‹¨ê³„ë³„ë¡œ ì»¤ë°‹í•˜ì—¬ ë¡¤ë°± ê°€ëŠ¥í•˜ë„ë¡ í•¨

